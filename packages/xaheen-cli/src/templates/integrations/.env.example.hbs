# {{name}} Integration Environment Configuration
# Norwegian Payment and Document Services
# Environment: {{environment}}

# =================
# VIPPS CONFIGURATION
# =================
{{#if (includes features "one-time-payment")}}
# Vipps Payment API Credentials
VIPPS_MSN={{authentication.merchantSerialNumber}}
VIPPS_CLIENT_ID={{authentication.clientId}}
VIPPS_CLIENT_SECRET=your_vipps_client_secret_here
VIPPS_SUBSCRIPTION_KEY={{authentication.subscriptionKey}}

# Vipps Callback URLs
VIPPS_CALLBACK_PREFIX={{#if callbackPrefix}}{{callbackPrefix}}{{else}}https://your-domain.no/vipps{{/if}}
VIPPS_FALLBACK_URL={{#if fallbackUrl}}{{fallbackUrl}}{{else}}https://your-domain.no/payment/result{{/if}}
VIPPS_WEBHOOK_URL={{#if webhookUrl}}{{webhookUrl}}{{else}}https://your-domain.no/webhooks/vipps{{/if}}

# Vipps Security
VIPPS_WEBHOOK_SECRET=your_webhook_secret_here
VIPPS_ENCRYPTION_KEY=your_32_byte_hex_encryption_key_here
{{/if}}

# =================
# DIGIPOST CONFIGURATION
# =================
{{#if (includes features "document-delivery")}}
# Digipost API Credentials
DIGIPOST_BROKER_ID={{authentication.brokerId}}
DIGIPOST_KEYSTORE_PATH={{authentication.keyStore}}
DIGIPOST_KEYSTORE_PASSWORD=your_keystore_password_here
DIGIPOST_KEY_ALIAS={{authentication.keyAlias}}

# Digipost Webhook Configuration
DIGIPOST_WEBHOOK_SECRET=your_digipost_webhook_secret_here

# Organization Information for Digipost
DIGIPOST_ORG_NUMBER={{senderInformation.organizationNumber}}
DIGIPOST_ORG_NAME="{{senderInformation.organizationName}}"
DIGIPOST_CONTACT_PERSON="{{senderInformation.contactPerson}}"
DIGIPOST_CONTACT_EMAIL={{senderInformation.contactEmail}}
{{/if}}

# =================
# NORWEGIAN COMPLIANCE
# =================

# Data Residency (norway/eu)
DATA_RESIDENCY={{compliance.dataResidency}}

# Document Classification
DOCUMENT_CLASSIFICATION={{compliance.documentClassification}}

# GDPR Compliance
GDPR_ENABLED={{compliance.gdpr}}
AUDIT_LOGGING_ENABLED={{compliance.auditLogging}}

# Encryption for sensitive data
ENCRYPTION_KEY=your_32_byte_hex_key_for_sensitive_data_here

# =================
# DATABASE CONFIGURATION
# =================

# Main Database
DATABASE_URL=postgresql://username:password@localhost:5432/{{name}}_db
DATABASE_SSL=true

# Redis for caching and sessions
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=your_redis_password_here

# =================
# LOGGING AND MONITORING
# =================

# Log Level (error, warn, log, debug, verbose)
LOG_LEVEL=log

# Application Monitoring
SENTRY_DSN=your_sentry_dsn_here
NEW_RELIC_LICENSE_KEY=your_new_relic_key_here

# Metrics and Analytics
PROMETHEUS_ENABLED=true
METRICS_PORT=9090

# =================
# SECURITY CONFIGURATION
# =================

# JWT Configuration
JWT_SECRET=your_jwt_secret_here
JWT_EXPIRATION=1h

# Session Configuration
SESSION_SECRET=your_session_secret_here
SESSION_TIMEOUT=3600000

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# CORS Configuration
CORS_ORIGINS=https://your-domain.no,https://admin.your-domain.no

# =================
# NOTIFICATION SERVICES
# =================

# Email Service (Norwegian providers recommended)
SMTP_HOST=smtp.your-provider.no
SMTP_PORT=587
SMTP_USER=your_smtp_user
SMTP_PASSWORD=your_smtp_password
SMTP_FROM_EMAIL=noreply@your-domain.no
SMTP_FROM_NAME="{{senderInformation.organizationName}}"

# SMS Service (Norwegian providers)
SMS_PROVIDER=telenor
SMS_API_KEY=your_sms_api_key
SMS_SENDER_ID={{senderInformation.organizationName}}

# =================
# BACKUP AND DISASTER RECOVERY
# =================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PROVIDER=azure
BACKUP_STORAGE_CONNECTION=your_backup_storage_connection

# =================
# FEATURE FLAGS
# =================

# Payment Features
{{#each features}}
FEATURE_{{this}}=true
{{/each}}

# Beta Features
BETA_FEATURES_ENABLED=false

# =================
# NORWEGIAN SPECIFIC SETTINGS
# =================

# Timezone
TZ=Europe/Oslo

# Language and Locale
LOCALE=nb-NO
CURRENCY=NOK

# Business Hours (Norwegian time)
BUSINESS_HOURS_START=08:00
BUSINESS_HOURS_END=17:00
BUSINESS_DAYS=1,2,3,4,5

# Norwegian Public Holidays API
HOLIDAY_API_ENABLED=true
HOLIDAY_API_URL=https://api.norskholiday.no

# =================
# DEVELOPMENT SETTINGS
# =================
{{#if (eq environment "test")}}

# Development Mode
NODE_ENV=development
DEBUG=true

# Hot Reload
HOT_RELOAD=true

# Test Configuration
TEST_DATABASE_URL=postgresql://username:password@localhost:5432/{{name}}_test
TEST_REDIS_URL=redis://localhost:6379/1

# Mock Services (for testing)
MOCK_VIPPS=true
MOCK_DIGIPOST=true
MOCK_BANKID=true

{{else}}

# Production Mode
NODE_ENV=production
DEBUG=false

# Production Security
HELMET_ENABLED=true
HTTPS_ONLY=true
SECURE_COOKIES=true

# Production Monitoring
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health

{{/if}}

# =================
# ADDITIONAL SERVICES
# =================

# Key Management Service
KMS_PROVIDER=azure
KMS_KEY_VAULT_URL=https://your-keyvault.vault.azure.net/

# Message Queue
QUEUE_PROVIDER=redis
QUEUE_URL=redis://localhost:6379/2

# File Storage
STORAGE_PROVIDER=azure
AZURE_STORAGE_CONNECTION_STRING=your_azure_storage_connection

# CDN Configuration
CDN_URL=https://cdn.your-domain.no
CDN_ENABLED=true

# =================
# LOAD BALANCING
# =================

# Application Settings
PORT=3000
CLUSTER_MODE=true
MAX_WORKERS=4

# Health Check
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000

# Graceful Shutdown
SHUTDOWN_TIMEOUT=10000