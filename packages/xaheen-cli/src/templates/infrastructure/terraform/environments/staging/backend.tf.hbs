# Backend configuration for staging environment
# Generated by Xaheen CLI Terraform Generator

terraform {
  backend "{{remoteState.backend}}" {
    {{#eq remoteState.backend "s3"}}
    bucket = "{{#if remoteState.bucket}}{{remoteState.bucket}}{{else}}{{projectName}}-terraform-state{{/if}}"
    key    = "environments/staging/terraform.tfstate"
    region = "{{#if remoteState.region}}{{remoteState.region}}{{else}}{{region}}{{/if}}"
    
    # Enable encryption and versioning
    encrypt        = true
    versioning     = true
    force_destroy  = false
    
    # DynamoDB table for state locking
    dynamodb_table = "{{projectName}}-terraform-locks"
    {{/eq}}
    
    {{#eq remoteState.backend "azurerm"}}
    resource_group_name  = "{{projectName}}-terraform-rg"
    storage_account_name = "{{projectName}}tfstate"
    container_name       = "{{#if remoteState.container}}{{remoteState.container}}{{else}}tfstate{{/if}}"
    key                  = "environments/staging/terraform.tfstate"
    {{/eq}}
    
    {{#eq remoteState.backend "gcs"}}
    bucket = "{{#if remoteState.bucket}}{{remoteState.bucket}}{{else}}{{projectName}}-terraform-state{{/if}}"
    prefix = "environments/staging"
    {{/eq}}
    
    {{#eq remoteState.backend "local"}}
    path = "./terraform-staging.tfstate"
    {{/eq}}
  }
}