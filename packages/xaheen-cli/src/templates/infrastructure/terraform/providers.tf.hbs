# Provider configuration
# Generated by Xaheen CLI Terraform Generator

{{#eq cloudProvider "aws"}}
# AWS Provider
provider "aws" {
  region = var.region
  
  default_tags {
    tags = {
      Project     = var.project_name
      Environment = var.environment
      ManagedBy   = "terraform"
      CreatedBy   = "xaheen-cli"
      Owner       = var.owner
    }
  }
}

# Additional AWS provider for us-east-1 (required for CloudFront, etc.)
provider "aws" {
  alias  = "us_east_1"
  region = "us-east-1"
  
  default_tags {
    tags = {
      Project     = var.project_name
      Environment = var.environment
      ManagedBy   = "terraform"
      CreatedBy   = "xaheen-cli"
      Owner       = var.owner
    }
  }
}
{{/eq}}

{{#eq cloudProvider "azure"}}
# Azure Provider
provider "azurerm" {
  features {
    key_vault {
      purge_soft_delete_on_destroy    = var.environment != "production"
      recover_soft_deleted_key_vaults = true
    }
    
    resource_group {
      prevent_deletion_if_contains_resources = var.environment == "production"
    }
    
    virtual_machine {
      delete_os_disk_on_deletion     = var.environment != "production"
      graceful_shutdown              = true
      skip_shutdown_and_force_delete = false
    }
    
    virtual_machine_scale_set {
      roll_instances_when_required = true
    }
  }
}

# Azure AD Provider (if needed for advanced identity management)
provider "azuread" {
  # Configuration will be inherited from Azure CLI or environment variables
}
{{/eq}}

{{#eq cloudProvider "gcp"}}
# Google Cloud Provider
provider "google" {
  project = var.project_id
  region  = var.region
}

# Google Cloud Beta Provider (for beta features)
provider "google-beta" {
  project = var.project_id
  region  = var.region
}
{{/eq}}

{{#eq cloudProvider "multi-cloud"}}
# Multi-Cloud Provider Configuration

# AWS Provider
provider "aws" {
  region = var.aws_region
  
  default_tags {
    tags = {
      Project     = var.project_name
      Environment = var.environment
      ManagedBy   = "terraform"
      CreatedBy   = "xaheen-cli"
      Owner       = var.owner
      CloudProvider = "aws"
    }
  }
}

# Azure Provider
provider "azurerm" {
  features {
    key_vault {
      purge_soft_delete_on_destroy    = var.environment != "production"
      recover_soft_deleted_key_vaults = true
    }
    
    resource_group {
      prevent_deletion_if_contains_resources = var.environment == "production"
    }
  }
}

# Google Cloud Provider
provider "google" {
  project = var.gcp_project_id
  region  = var.gcp_region
}

# Google Cloud Beta Provider
provider "google-beta" {
  project = var.gcp_project_id
  region  = var.gcp_region
}
{{/eq}}

# Random Provider (for generating unique names)
provider "random" {
  # No configuration needed
}

# TLS Provider (for generating certificates and keys)
provider "tls" {
  # No configuration needed
}

# Time Provider (for time-based resources)
provider "time" {
  # No configuration needed
}